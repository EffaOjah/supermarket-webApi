<div class="sidebar">
  <div class="sidebar-wrapper">
    <div class="user">
      <div class="photo">
        <img src="/img/profile-icon.png" />
      </div>
      <div class="info">
        <a
          class=""
          data-toggle="collapse"
          href="#collapseExample"
          aria-expanded="true"
        >
          <span>
            <%= user && user.branch_name ? user.branch_name : (user ?
            user.role.charAt(0).toUpperCase() + user.role.slice(1) : 'User') %>
            <span class="user-level"
              ><%= user ? user.role.toUpperCase() : '' %></span
            >
            <span class="caret"></span>
          </span>
        </a>
        <div class="clearfix"></div>

        <div class="collapse in" id="collapseExample" aria-expanded="true">
          <ul class="nav">
            <li>
              <a href="#profile">
                <span class="link-collapse">My Profile</span>
              </a>
            </li>
            <li>
              <a href="#edit">
                <span class="link-collapse">Edit Profile</span>
              </a>
            </li>
            <li>
              <a href="#settings">
                <span class="link-collapse">Settings</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <ul class="nav">
      <% if (user && user.role === 'admin') { %>
      <li
        class="nav-item <%= currentPath === '/admin/dashboard' ? 'active' : '' %>"
      >
        <a href="/admin/dashboard">
          <i class="fa-solid fa-gauge"></i>
          <p>Dashboard</p>
        </a>
      </li>
      <% } else if (user && user.role === 'warehouse') { %>
      <li
        class="nav-item <%= currentPath === '/warehouse/dashboard' ? 'active' : '' %>"
      >
        <a href="/warehouse/dashboard">
          <i class="fa-solid fa-gauge"></i>
          <p>Warehouse Dash</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/admin/dashboard' ? 'active' : '' %>"
      >
        <a href="/admin/dashboard">
          <i class="fa-solid fa-building"></i>
          <p>All Branches</p>
        </a>
      </li>
      <% } else if (user && user.role === 'operations') { %>
      <li
        class="nav-item <%= currentPath === '/operations/dashboard' ? 'active' : '' %>"
      >
        <a href="/operations/dashboard">
          <i class="fa-solid fa-gauge"></i>
          <p>Ops Dashboard</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/admin/dashboard' ? 'active' : '' %>"
      >
        <a href="/admin/dashboard">
          <i class="fa-solid fa-building"></i>
          <p>All Branches</p>
        </a>
      </li>
      <% } else if (user && user.role === 'accountant') { %>
      <li
        class="nav-item <%= currentPath === '/accountant/dashboard' ? 'active' : '' %>"
      >
        <a href="/accountant/dashboard">
          <i class="fa-solid fa-gauge"></i>
          <p>Accountant Dash</p>
        </a>
      </li>
      <% } else if (user && user.role === 'pko') { %>
      <li
        class="nav-item <%= currentPath === '/pko/dashboard' ? 'active' : '' %>"
      >
        <a href="/pko/dashboard">
          <i class="fa-solid fa-gauge"></i>
          <p>PKO Dashboard</p>
        </a>
      </li>
      <% } %> <% if (user && ['admin', 'warehouse', 'operations',
      'pko'].includes(user.role)) { %>
      <li
        class="nav-item <%= currentPath === '/admin/product-upload' ? 'active' : '' %>"
      >
        <a href="/admin/product-upload">
          <i class="fa-solid fa-upload"></i>
          <p>Upload Product</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/admin/all-products' ? 'active' : '' %>"
      >
        <a href="/admin/all-products">
          <i class="fa-solid fa-tarp"></i>
          <p>All Products</p>
        </a>
      </li>
      <% } %> <% if (user && ['admin', 'warehouse',
      'operations'].includes(user.role)) { %>
      <li
        class="nav-item <%= currentPath.startsWith('/staff/add') ? 'active' : '' %>"
      >
        <a href="/staff/add">
          <i class="fa-solid fa-user-plus"></i>
          <p>Add Staff</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/staff/all') ? 'active' : '' %>"
      >
        <a href="/staff/all">
          <i class="fa-solid fa-users"></i>
          <p>All Staff</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/payroll/setup') ? 'active' : '' %>"
      >
        <a href="/payroll/setup">
          <i class="fa-solid fa-money-check-dollar"></i>
          <p>Payroll Config</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/payroll/run') ? 'active' : '' %>"
      >
        <a href="/payroll/run">
          <i class="fa-solid fa-play"></i>
          <p>Run Payroll</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/payroll/history') ? 'active' : '' %>"
      >
        <a href="/payroll/history">
          <i class="fa-solid fa-file-invoice-dollar"></i>
          <p>Payroll History</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/attendance') ? 'active' : '' %>"
      >
        <a href="/attendance">
          <i class="fa-solid fa-clock"></i>
          <p>Attendance</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/leave') ? 'active' : '' %>"
      >
        <a href="/leave/manage">
          <i class="fa-solid fa-calendar-check"></i>
          <p>Leave Mgmt</p>
        </a>
      </li>
      <li class="nav-item <%= currentPath === '/assets/add' ? 'active' : '' %>">
        <a href="/assets/add">
          <i class="fa-solid fa-box-archive"></i>
          <p>Add Asset</p>
        </a>
      </li>
      <li class="nav-item <%= currentPath === '/assets/all' ? 'active' : '' %>">
        <a href="/assets/all">
          <i class="fa-solid fa-boxes-stacked"></i>
          <p>All Assets</p>
        </a>
      </li>
      <% } %> <% if (user && ['admin', 'accountant'].includes(user.role)) { %>
      <li class="nav-section">
        <span class="sidebar-mini-icon">
          <i class="fa fa-ellipsis-h"></i>
        </span>
        <h4 class="text-section">Accounting</h4>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/customers') ? 'active' : '' %>"
      >
        <a href="/customers">
          <i class="fa-solid fa-users-viewfinder"></i>
          <p>Customers</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.startsWith('/invoices') ? 'active' : '' %>"
      >
        <a href="/invoices">
          <i class="fa-solid fa-file-invoice"></i>
          <p>Invoices</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/payments/receive' ? 'active' : '' %>"
      >
        <a href="/payments/receive">
          <i class="fa-solid fa-money-bill-wave"></i>
          <p>Receive Payment</p>
        </a>
      </li>
      <li class="nav-item <%= currentPath === '/payments' ? 'active' : '' %>">
        <a href="/payments">
          <i class="fa-solid fa-history"></i>
          <p>Payment History</p>
        </a>
      </li>
      <li class="nav-item <%= currentPath === '/ledger/add' ? 'active' : '' %>">
        <a href="/ledger/add">
          <i class="fa-solid fa-book"></i>
          <p>Ledger Entry</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/ledger/view' ? 'active' : '' %>"
      >
        <a href="/ledger/view">
          <i class="fa-solid fa-book-open"></i>
          <p>View Ledger</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/ledger/accounts' ? 'active' : '' %>"
      >
        <a href="/ledger/accounts">
          <i class="fa-solid fa-sitemap"></i>
          <p>Chart of Accounts</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/ledger/trial-balance' ? 'active' : '' %>"
      >
        <a href="/ledger/trial-balance">
          <i class="fa-solid fa-balance-scale"></i>
          <p>Trial Balance</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/ledger/balance-sheet' ? 'active' : '' %>"
      >
        <a href="/ledger/balance-sheet">
          <i class="fa-solid fa-file-invoice-dollar"></i>
          <p>Balance Sheet</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/ledger/profit-loss' ? 'active' : '' %>"
      >
        <a href="/ledger/profit-loss">
          <i class="fa-solid fa-money-bill-trend-up"></i>
          <p>Profit & Loss</p>
        </a>
      </li>
      <% } %> <% if (user && ['admin', 'warehouse', 'operations',
      'accountant'].includes(user.role)) { %>
      <li
        class="nav-item <%= currentPath.includes('/sales-reps') ? 'active' : '' %>"
      >
        <% let salesRepLink = '/admin/sales-reps'; if (user && user.role ===
        'warehouse') salesRepLink = '/warehouse/sales-reps'; if (user &&
        user.role === 'operations') salesRepLink = '/operations/sales-reps'; if
        (user && user.role === 'accountant') salesRepLink =
        '/accountant/sales-reps'; %>
        <a href="<%= salesRepLink %>">
          <i class="fa-solid fa-user-tie"></i>
          <p>Sales Reps</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath === '/admin/product-requests' ? 'active' : '' %>"
      >
        <a href="/admin/product-requests">
          <i class="fa-solid fa-clipboard-list"></i>
          <p>Product Requests</p>
        </a>
      </li>
      <li
        class="nav-item <%= currentPath.includes('/sales-rep-invoices') ? 'active' : '' %>"
      >
        <% let invoiceLink = '/admin/sales-rep-invoices'; if (user && user.role
        === 'warehouse') invoiceLink = '/warehouse/sales-rep-invoices'; if (user
        && user.role === 'operations') invoiceLink =
        '/operations/sales-rep-invoices'; if (user && user.role ===
        'accountant') invoiceLink = '/accountant/sales-rep-invoices'; %>
        <a href="<%= invoiceLink %>">
          <i class="fa-solid fa-file-invoice-dollar"></i>
          <p>Sales Rep Invoices</p>
        </a>
      </li>
      <% } %>

      <li class="nav-item">
        <a href="/logout">
          <i class="fas fa-sign-out-alt"></i>
          <p>Log Out</p>
        </a>
      </li>
    </ul>
  </div>
</div>
